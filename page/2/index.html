<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="https://wustdong.github.io/images/favicon.ico?v=5.1.1" />






<meta name="description" content="千里之行，始于足下">
<meta property="og:type" content="website">
<meta property="og:title" content="晶怪的小屋">
<meta property="og:url" content="https://wustdong.github.io/page/2/index.html">
<meta property="og:site_name" content="晶怪的小屋">
<meta property="og:description" content="千里之行，始于足下">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晶怪的小屋">
<meta name="twitter:description" content="千里之行，始于足下">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wustdong.github.io/page/2/"/>





  <title>晶怪的小屋</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">晶怪的小屋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://wustdong.github.io/2017/09/17/2017-0917-learningGulp01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://wustdong.github.io/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晶怪的小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/17/2017-0917-learningGulp01/" itemprop="url">
                  前端自动化工具 gulp 入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-17T13:29:06+08:00">
                2017-09-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Gulp/" itemprop="url" rel="index">
                    <span itemprop="name">Gulp</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>改动项目文件，查看效果手动去刷新浏览器？<br>项目打包上传到服务器，发布版本后结果测试还是上一个版本？<br>添加 jslint ,统一代码风格？ </p>
</blockquote>
<h2 id="第一步：gulp-安装"><a href="#第一步：gulp-安装" class="headerlink" title="第一步：gulp 安装"></a>第一步：gulp 安装</h2><p>首先，最基本也最重要的是，我们需要搭建 node 环境。首推的是先安装 npm,然后通过npm安装项目需要的 node版本。接下来使用以下命令安装全局 gulp:   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g gulp</div></pre></td></tr></table></figure>
<p>其次，我们需要将gulp安装到项目本地:  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install —-save-dev gulp</div></pre></td></tr></table></figure>
<p>并将信息更新到 package.json文件中,更新 devDependencies(–save自动更新dependencies字段值)，想要更加深入的了解它可以看看<a href="https://github.com/ericdum/mujiang.info/issues/6/" target="_blank" rel="external">package.json文档</a>。  </p>
<h2 id="第二步：新建-gulpfile-js-文件"><a href="#第二步：新建-gulpfile-js-文件" class="headerlink" title="第二步：新建 gulpfile.js 文件"></a>第二步：新建 gulpfile.js 文件</h2><p>现在我们需要先确定项目需要gulp执行哪些任务。  </p>
<ul>
<li>检查javascript</li>
<li>编译scss文件为css文件</li>
<li>监测文件改变，自动刷新浏览器</li>
<li>给js,css,img文件添加版本号</li>
<li>合并压缩文件   </li>
</ul>
<h3 id="1-安装依赖"><a href="#1-安装依赖" class="headerlink" title="1. 安装依赖"></a>1. 安装依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-jslint gulp-sass</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-rev gulp-rev-collector // 添加版本号</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-concat gulp-uglify  // 合并压缩</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm  install  runSequence browserSync reload  // 指定执行顺序，自动刷新</div></pre></td></tr></table></figure>
<h3 id="2-新建-gulpfile-js-文件"><a href="#2-新建-gulpfile-js-文件" class="headerlink" title="2. 新建 gulpfile.js 文件"></a>2. 新建 gulpfile.js 文件</h3><p>gulp 的 5 个 API： task, run, watch, src 和 dest，详解可参考文档<a href="http://www.cnblogs.com/2050/p/4198792.html" target="_blank" rel="external"> gulp 的 API 介绍</a>。还有pipe(),Unix操作系统的管道（pipe）思想，前一级的输出，直接变成后一级的输入。具体参见<a href="https://github.com/gulpjs/gulp/blob/master/docs/API.md" target="_blank" rel="external"> API 官方文档</a>。<br> 在项目根目录新建 gulpfile.js 文件。我们运行项目时，在命令行可以通过 gulp 命令直接运行，此时，分为开发阶段和打包阶段，得到不同的 dist 文件。示例如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"> // 方便测试时使用，浏览器同步更改</div><div class="line">gulp.task(&apos;dev&apos;, [&apos;clean&apos;], function () &#123;</div><div class="line">  runSequence([&apos;html&apos;, &apos;img&apos;, &apos;css&apos;, &apos;js&apos;, &apos;uglify&apos;], &apos;revimg&apos;, &apos;rev&apos;, function () &#123;</div><div class="line">    browserSync.init(&#123;</div><div class="line">      notify: false,</div><div class="line">      logPrefix: &apos;AS&apos;,</div><div class="line">      server: &#123;</div><div class="line">        baseDir: &apos;dist&apos;,</div><div class="line">        index: &apos;index.html&apos;</div><div class="line">      &#125;,</div><div class="line">      port: 3000</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">  browserSync.watch([&apos;*.html&apos;, &apos;assets/template/*.html&apos;]).on(&apos;change&apos;, function () &#123;</div><div class="line">    runSequence(&apos;html&apos;, &apos;revimg&apos;, &apos;rev&apos;, reload);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  browserSync.watch([&apos;assets/imgs/**/*.*&apos;], function () &#123;</div><div class="line">    runSequence(&apos;cleanimg&apos;,&apos;img&apos;, &apos;revimg&apos;, reload);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  browserSync.watch(&apos;assets/css/**/*.scss&apos;).on(&apos;change&apos;, function () &#123;</div><div class="line">    runSequence(&apos;cleancss&apos;,&apos;css&apos;, &apos;rev&apos;, reload);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  browserSync.watch([&apos;assets/js/**/*.js&apos;]).on(&apos;change&apos;, function () &#123;</div><div class="line">    runSequence(&apos;cleanjs&apos;, &apos;js&apos;, &apos;rev&apos;, reload);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"> // 打包时使用</div><div class="line"> gulp.task(&apos;dist&apos;, [&apos;clean&apos;], function () &#123;</div><div class="line">   runSequence([&apos;html&apos;, &apos;img&apos;, &apos;css&apos;, &apos;js&apos;, &apos;uglify&apos;], &apos;revimg&apos;, &apos;rev&apos;, function () &#123;</div><div class="line">     browserSync.init(&#123;</div><div class="line">       notify: false,</div><div class="line">       logPrefix: &apos;AS&apos;,</div><div class="line">       server: &#123;</div><div class="line">         baseDir: &apos;dist&apos;,</div><div class="line">         index: &apos;index.html&apos;</div><div class="line">       &#125;,</div><div class="line">       port: 3000</div><div class="line">     &#125;);</div><div class="line">   &#125;);</div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
<h2 id="踩坑系列"><a href="#踩坑系列" class="headerlink" title="踩坑系列"></a>踩坑系列</h2><h3 id="1-添加版本号"><a href="#1-添加版本号" class="headerlink" title="1. 添加版本号"></a>1. 添加版本号</h3><p>gulp 插件很多，当想要实现某一个具体功能时，开始搜到的都是需要更改 node 文件，这对于多人合作开发的项目很不友好，你改动的是你本地的 node 文件,而我们上传代码是去掉 node-modules 模块的。感谢 frank 及时阻止我这愚昧的跟随者。谷歌查询所需插件，最好直接去官网找，确定插件后，明确每个函数的具体作用（因为官网给的例子并不详细，具体实现需要你结合项目情况来配置），才能用好插件。以下以 css 文件为例，详细介绍如何添加版本号：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">gulp.task(&apos;css&apos;, function () &#123;</div><div class="line">  return gulp.src(&apos;assets/css/**/*.scss&apos;)</div><div class="line">    .pipe(sass(&#123;</div><div class="line">      precision: 10,</div><div class="line">      onError: console.error.bind(console, &apos;Sass error:&apos;)</div><div class="line">    &#125;))</div><div class="line">    .pipe(autoPrefixer(&#123;</div><div class="line">      browsers: AUTOPREFIXER_BROWSERS</div><div class="line">    &#125;))</div><div class="line">    .pipe(concat(&apos;index.css&apos;))</div><div class="line">    .pipe(rev())</div><div class="line">    .pipe(gulp.dest(&apos;dist/assets/css/&apos;))</div><div class="line">    .pipe(rev.manifest(&apos;rev-css-manifest.json&apos;))</div><div class="line">    .pipe(gulp.dest(&apos;dist/rev/css&apos;))</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>将 scss 文件转化合并为css文件后，rev()就是给 css 文件添加 md5 值。将其输出到后续的目录中。manifest()是记录重命名后的对应关系，同样，将 manifest.json 文件输出到 ‘dist/rev/css’。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line"> &quot;index.css&quot;: &quot;index-e970023450.css&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最后得到的目录是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> dist</div><div class="line">|____assets</div><div class="line">| |____css</div><div class="line">| |____imgs</div><div class="line">| |____js</div><div class="line">|____originalHtml</div><div class="line">| |____.DS_Store</div><div class="line">| |____index.html</div><div class="line">|____rev</div><div class="line">| |____css</div><div class="line">| |____imgs</div><div class="line">| |____js</div></pre></td></tr></table></figure>
<p>接下来更新 index.html 文件中的引用：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> // Html替换css、js文件版本   </div><div class="line">gulp.task(&apos;rev&apos;, function () &#123;</div><div class="line">  return gulp.src([&apos;dist/rev/**/*.json&apos;, &apos;dist/originalHtml/*.html&apos;])</div><div class="line">    .pipe(revCollector())</div><div class="line">    .pipe(gulp.dest(&apos;dist/&apos;));</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>revCollector()函数是处理根据前面的json文件，替换掉后面目录中的html文件中对应的引用。<strong><em>注意，这里在开发过程中的task中，因为index文件自身的名字也会添加版本号，导致第一次添加版本号后续的更改，会找不到原始的index.html文件</em></strong>。所以我们在dist目录添加了一个存放原始index.html文件的目录，每次添加版本号的src都定义为originalHtml目录中的index.html文件。同时，还应注意删除/清空dist目录下上一个版本的版本号文件（css,js,img,index）。  </p>
<h3 id="2-监控内容改变，自动刷新浏览器"><a href="#2-监控内容改变，自动刷新浏览器" class="headerlink" title="2. 监控内容改变，自动刷新浏览器"></a>2. 监控内容改变，自动刷新浏览器</h3><p>index.html 文件中的内容已经更改为最新版本，但是浏览器加载的却仍是上一个版本的内容。查看网页代码发现，浏览器加载的是上一个版本的文件，后来<strong><em>局部注释</em></strong> (不错的/逼不得已的定位Bug的方法) ，发现watch什么都没做，浏览器还是刷新了。原来在 watch 之前的某个 task 里不小心写了 reload。删掉错误的 reload 后，瞬间惊艳了我自己。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">gulp.task(&apos;dev&apos;, [&apos;clean&apos;], function () &#123;</div><div class="line">  runSequence([&apos;html&apos;, &apos;img&apos;, &apos;css&apos;, &apos;js&apos;, &apos;uglify&apos;], &apos;revimg&apos;, &apos;rev&apos;, function () &#123;</div><div class="line">    browserSync.init(&#123;</div><div class="line">      notify: false,</div><div class="line">      logPrefix: &apos;AS&apos;,</div><div class="line">      server: &#123;</div><div class="line">        baseDir: &apos;dist&apos;,</div><div class="line">        index: &apos;index.html&apos;</div><div class="line">      &#125;,</div><div class="line">      port: 3000</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">  browserSync.watch([&apos;*.html&apos;, &apos;assets/template/*.html&apos;]).on(&apos;change&apos;, function () &#123;</div><div class="line">    runSequence(&apos;html&apos;, &apos;revimg&apos;, &apos;rev&apos;, reload);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  browserSync.watch([&apos;assets/imgs/**/*.*&apos;], function () &#123;</div><div class="line">    runSequence(&apos;cleanimg&apos;,&apos;img&apos;, &apos;revimg&apos;, reload);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  browserSync.watch(&apos;assets/css/**/*.scss&apos;).on(&apos;change&apos;, function () &#123;</div><div class="line">    runSequence(&apos;cleancss&apos;,&apos;css&apos;, &apos;rev&apos;, reload);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  browserSync.watch([&apos;assets/js/**/*.js&apos;]).on(&apos;change&apos;, function () &#123;</div><div class="line">    runSequence(&apos;cleanjs&apos;, &apos;js&apos;, &apos;rev&apos;, reload);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="完整示例"><a href="#完整示例" class="headerlink" title="完整示例"></a>完整示例</h2><p>项目完整示例如下：  </p>
<pre><code> const gulp = require(&apos;gulp&apos;);
 const clean = require(&apos;gulp-clean&apos;);
 const sass = require(&apos;gulp-sass&apos;);
 const concat = require(&apos;gulp-concat&apos;);
 const autoPrefixer = require(&apos;gulp-autoprefixer&apos;);
 const browserSync = require(&apos;browser-sync&apos;).create();
 const runSequence = require(&apos;run-sequence&apos;);
 const jshint = require(&apos;gulp-jshint&apos;);
 const injectPartials = require(&apos;gulp-inject-partials&apos;);
 const uglify = require(&apos;gulp-uglify&apos;);
 const rev = require(&apos;gulp-rev&apos;);
 const revCollector = require(&apos;gulp-rev-collector&apos;);
 const reload = browserSync.reload;
 const minifyCss = require(&apos;gulp-clean-css&apos;);

 const AUTOPREFIXER_BROWSERS = [
   &apos;ie &gt;= 10&apos;,
   &apos;ie_mob &gt;= 10&apos;,
   &apos;ff &gt;= 30&apos;,
   &apos;chrome &gt;= 34&apos;,
   &apos;safari &gt;= 7&apos;,
   &apos;opera &gt;= 23&apos;,
   &apos;ios &gt;= 7&apos;,
   &apos;android &gt;= 4.4&apos;,
   &apos;bb &gt;= 10&apos;
 ];

 gulp.task(&apos;clean&apos;, function () {
   return gulp.src([&apos;dist&apos;])
     .pipe(clean());
 });

 gulp.task(&apos;html&apos;, function () {
   return gulp.src(&apos;index.html&apos;)
     .pipe(injectPartials())
     .pipe(gulp.dest(&apos;dist/&apos;))
     .pipe(gulp.dest(&apos;dist/originalHtml&apos;));
 });

 gulp.task(&apos;img&apos;, function () {
   return gulp.src(&apos;assets/imgs/**/*.*&apos;)
     .pipe(rev())
     .pipe(gulp.dest(&apos;dist/assets/imgs/&apos;))
     .pipe(rev.manifest(&apos;rev-img-manifest.json&apos;))
     .pipe(gulp.dest(&apos;dist/rev/imgs&apos;));
 });

 gulp.task(&apos;css&apos;, function () {
   return gulp.src(&apos;assets/css/**/*.scss&apos;)
     .pipe(sass({
       precision: 10,
       onError: console.error.bind(console, &apos;Sass error:&apos;)
     }))
     .pipe(autoPrefixer({
       browsers: AUTOPREFIXER_BROWSERS
     }))
     .pipe(concat(&apos;index.css&apos;))
     .pipe(rev())
     .pipe(gulp.dest(&apos;dist/assets/css/&apos;))
     .pipe(rev.manifest(&apos;rev-css-manifest.json&apos;))
     .pipe(gulp.dest(&apos;dist/rev/css&apos;))
 });

 gulp.task(&apos;jshint&apos;, function () {
   return gulp.src(&apos;assets/js/*.js&apos;)
     .pipe(jshint())
     .pipe(jshint.reporter(&apos;jshint-stylish&apos;));
 });

 gulp.task(&apos;business-js&apos;, function () {
   return gulp.src([
       &apos;assets/js/areadata.js&apos;,
       &apos;assets/js/index.js&apos;,
       &apos;assets/js/submitajax.js&apos;
     ])
     .pipe(concat(&apos;index.js&apos;))
     .pipe(rev())
     .pipe(gulp.dest(&apos;dist/assets/js/&apos;))
     .pipe(rev.manifest(&apos;rev-js-manifest.json&apos;))
     .pipe(gulp.dest(&apos;dist/rev/js&apos;));
 });

 gulp.task(&apos;concat&apos;, [&apos;business-js&apos;, &apos;jshint&apos;], function () {
   return gulp.src([
       &apos;assets/js/libs/zepto.js&apos;,
       &apos;assets/js/libs/fastclick.js&apos;,
       &apos;assets/js/libs/sea.js&apos;
     ])
     .pipe(concat(&apos;libs.js&apos;))
     .pipe(gulp.dest(&apos;dist/assets/js&apos;));
 });

 gulp.task(&apos;uglify&apos;, function () {
   return gulp.src(&apos;dist/assets/js/*.js&apos;)
     .pipe(uglify())
     .pipe(gulp.dest(&apos;dist/assets/js&apos;));
 });

 gulp.task(&apos;js&apos;, [&apos;concat&apos;]);

 // Html替换css、js文件版本   
 gulp.task(&apos;rev&apos;, function () {
   return gulp.src([&apos;dist/rev/**/*.json&apos;, &apos;dist/originalHtml/*.html&apos;])
     .pipe(revCollector())
     .pipe(gulp.dest(&apos;dist/&apos;));
 });

 // css替换img文件版本   
 gulp.task(&apos;revimg&apos;, function () {
   return gulp.src([&apos;dist/rev/**/rev-img-manifest.json&apos;, &apos;dist/assets/css/*.css&apos;])
     .pipe(revCollector())
     .pipe(gulp.dest(&apos;dist/assets/css&apos;));
 });

 gulp.task(&apos;cleanjs&apos;, function () {
   return gulp.src([&apos;dist/assets/js/&apos;])
     .pipe(clean());
 });
 gulp.task(&apos;cleancss&apos;, function () {
  return gulp.src([&apos;dist/assets/css/&apos;])
    .pipe(clean());
});
gulp.task(&apos;cleanimg&apos;, function () {
  return gulp.src([&apos;dist/assets/img/&apos;])
    .pipe(clean());
});
</code></pre><p>以上是处理基本的自动化处理逻辑。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>插件就是为了方便才会被推行，要掌握的是具体情况具体分析。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://wustdong.github.io/2017/09/02/2017-0708-angular/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://wustdong.github.io/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晶怪的小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/02/2017-0708-angular/" itemprop="url">
                  8月小结晶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-02T23:54:57+08:00">
                2017-09-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Angular2/" itemprop="url" rel="index">
                    <span itemprop="name">Angular2</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Have I caught the sun?  </p>
</blockquote>
<h3 id="我做了什么？"><a href="#我做了什么？" class="headerlink" title="我做了什么？"></a>我做了什么？</h3><p>本月开始了我的angular之旅~我是这样学习的：  </p>
<ol>
<li>买了两本angular书籍</li>
<li>买了大漠穷秋老师的在线直播课程</li>
<li>结合实际需求，编码 </li>
</ol>
<p>经实践表明还是直接上手代码效率最高，需求使我进步。前期看书，希望对框架有个大致的了解再开始编码，通过基础了解游戏规则。然而，先看了typescript，觉得跟es6没什么差别,具体语法也没记住太多。接下来的指令，依赖注入，都是看的时候明白逻辑，书合上后就觉得全忘记了，酒肉穿肠过的感觉。但是项目的需求就摆在那里，开始动手编码了，就知道哪一块的知识有欠缺。  </p>
<p>最开始是管理系统的排版，我需要编码的漏斗模块，因为基础框架frank已经定好了，所以其实在页面的固定版块，所以我们只需要在相应的模板里定义好样式就OK。【这里的具体样式逻辑我还没去看，应该主要得益于系统模块化以及路由配置。说到这个，我发现框架的一大优点就是可以强制统一编码风格：模块化(组件，常量接口)，便于维护和扩展】  </p>
<p>其次是多人合作开发。系统很多模块是可以复用的，开发前应先了解整个系统的详细页面和功能–不要重复造轮子。但同时，也会有些影响前期的开发效率，遇到界面和接口只有少量差别时，先了解自己的需求，同时去查看已有的组件，是否可复用，或者是否需要扩展当前已有的组件等等。当然，前期的整合是非常值得的。  </p>
<p>最后，带着急功近利的心态边学边做，享受慢的可怕的进度的同时，内心真的很焦虑。<strong>浮于业务，止于功能</strong>。除了编辑漏斗时添加步骤逻辑有点复杂，其他稍花些时间都能解决。平时代码研究得少，业务逻辑也不太清楚，关键angular语法也不熟练，问题定位速度慢。  </p>
<h3 id="未完待续的那些事儿"><a href="#未完待续的那些事儿" class="headerlink" title="未完待续的那些事儿"></a>未完待续的那些事儿</h3><p>除了想变好看，更应该琢磨的是怎么优雅。能不能微笑面对大家review你的代码？</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://wustdong.github.io/2017/04/24/hexo-build-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://wustdong.github.io/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晶怪的小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/24/hexo-build-blog/" itemprop="url">
                  Hexo搭建个人博客+ NexT主题配置 （Mac篇）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-24T17:59:38+08:00">
                2017-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>导语:  </p>
<blockquote>
<p>很早之前就创建了自己的blog，之后就一直没有管理。一旦有强烈的愿望去做某件事，那么一切都是水到渠成。  </p>
</blockquote>
<h3 id="一、创建你的XXX-github-io仓库"><a href="#一、创建你的XXX-github-io仓库" class="headerlink" title="一、创建你的XXX.github.io仓库"></a>一、创建你的XXX.github.io仓库</h3><h4 id="1-注册Github账户"><a href="#1-注册Github账户" class="headerlink" title="1. 注册Github账户"></a>1. 注册Github账户</h4><p>在<a href="https://github.com/" target="_blank" rel="external">Github官网</a>注册个人账户。有邮箱就ok.  </p>
<h4 id="2-创建公共仓库"><a href="#2-创建公共仓库" class="headerlink" title="2. 创建公共仓库"></a>2. 创建公共仓库</h4><p>在自己Github主页右下角，创建一个新的repository。注意，此处域名需跟你的账户名一致。比如，我的账户名是wustdong，那么我将创建的repository名为wustdong.github.io.  </p>
<h3 id="二、安装hexo"><a href="#二、安装hexo" class="headerlink" title="二、安装hexo"></a>二、安装hexo</h3><blockquote>
<p>在Mac上安装hexo，相当于在本地搭建写博客的环境，每次在本地新建文章（hexo new “article”）后，先在本地预览，然后发布到github；至于页面排版，比如首页文章的排版这些逻辑都是主题里设置好的，你只需要写文章然后发布(这个过程中，hexo可将md文件转换为html文件)。另外在编辑md文件时，添加分类（categories）可在类别页面通过分类查看文章。    </p>
</blockquote>
<h4 id="1-安装前提"><a href="#1-安装前提" class="headerlink" title="1. 安装前提"></a>1. 安装前提</h4><p>需要安装 Node.js 和 Git 两个应用程序，直接到官网安装最新版本即可，如已安装请跳过。  </p>
<ul>
<li><a href="https://nodejs.org/en/" target="_blank" rel="external">node官网</a>  </li>
<li><a href="https://git-scm.com/" target="_blank" rel="external">git官网</a></li>
</ul>
<p>注意，注意hexo要求的node版本。比如：hexo3运行与最新版的node 6.x不兼容，hexo3安装4.4.5版本的nodeJS。<a href="http://nodejs.org/dist/" target="_blank" rel="external">点击这里下载对应版本node</a>    </p>
<h4 id="2-安装Hexo"><a href="#2-安装Hexo" class="headerlink" title="2. 安装Hexo"></a>2. 安装Hexo</h4><p>安装完Node.js 及 Git 后，即可使用npm来安装Hexo：    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g hexo-cli</div></pre></td></tr></table></figure>
<p>注意：此处直接使用官方给的命令行安装，可能会报如下错误    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; [Error: Cannot find module &apos;./build/Release/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</div><div class="line">&#123; [Error: Cannot find module &apos;./build/default/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</div><div class="line">&#123; [Error: Cannot find module &apos;./build/Debug/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</div></pre></td></tr></table></figure>
<p>一番尝试后，在我电脑上成功安装hexo的命令为   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g hexo-cli  --no-optional --registry=http://registry.npm.taobao.org</div></pre></td></tr></table></figure>
<h4 id="3-初始化Hexo"><a href="#3-初始化Hexo" class="headerlink" title="3. 初始化Hexo"></a>3. 初始化Hexo</h4><p>创建一个目录用来作为你的blog目录，例如 gitBlog；并在该目录中进行Hexo的初始化： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo init </div><div class="line">npm install</div></pre></td></tr></table></figure>
<p>至此，你就完成了Hexo的安装及初始化，接下来我们就可以进行本地的预览啦：<br>先安装hexo server  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install hexo-server</div></pre></td></tr></table></figure>
<p>然后生成静态页面并打开hexo本地服务  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo generate   (或 hexo g)</div><div class="line">hexo server</div></pre></td></tr></table></figure>
<p>注意：本地测试时 <a href="http://localhost:4000，确保翻墙代理（我用得Shadowsocks）已关，否则会遇到本地页面无法连接服务器的提示哦。" target="_blank" rel="external">http://localhost:4000，确保翻墙代理（我用得Shadowsocks）已关，否则会遇到本地页面无法连接服务器的提示哦。</a>  </p>
<h4 id="4-关联Github账户"><a href="#4-关联Github账户" class="headerlink" title="4.关联Github账户"></a>4.关联Github账户</h4><p>方法一：  首先配置git公钥，即在github账号添加SSH key，首先先确认一下是否已经有一个公钥了。SSH 公钥默认储存在账户的主目录下的 ~/.ssh 目录。进去看看，没有就生成一个：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C &quot;wustdong&quot;</div></pre></td></tr></table></figure>
<p>读取出来： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat ~/.ssh/id_rsa.pub</div></pre></td></tr></table></figure>
<p>将以上生成的公钥复制粘贴到github页面的SSH and GPG keys中.注意：此时接下来的deploy配置中的账户必须是https。推荐方法一，因为这种方式配置的git会记录所有用户的提交。无颜色，不坂本。hhhh…    </p>
<p>方法二： 最开始我用的deploy配置是ssh，搭配的git关联就比较简单，下载git客户端，输入git账号密码登陆,git客户端会自动配置好公钥。</p>
<p>关联成功后，然后打开前面创建的gitBlog目录下的 _config.yml 文件，在修改最下方的deploy为：  </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line"> type: git</div><div class="line"> repo: git@github.com:[your_account]/[your_account].github.io.git</div><div class="line"> branch: master</div></pre></td></tr></table></figure>
<p>注意，冒号后面一定要加空格. 例如：如果采用https，则repo为<code>https://github.com/wustdong/wustdong.github.io.git</code>；如果采用ssh,则repo为<code>xgit@github.com:wustdong/wustdong.github.io.git</code>  </p>
<p>接下来安装hexo的git部署，在命令行中执行：    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>最后，将生成静态页面并部署到github的仓库中，执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo d -g</div></pre></td></tr></table></figure>
<p>当提示INFO Deploy done: git 即上传成功，这时就可以通过http:\[your_account].github.io 来访问你的个人站点了.  </p>
<h3 id="三、个性化主题设置"><a href="#三、个性化主题设置" class="headerlink" title="三、个性化主题设置"></a>三、个性化主题设置</h3><blockquote>
<p>到这一步，首页已经完成了，接下来是讲解如何更改网站logo,个人头像，主页导航设置以及如何新建发布文章。  </p>
</blockquote>
<p>Hexo 安装主题的方式非常简单，只需要将主题文件拷贝至站点目录的 themes 目录下， 然后修改下配置文件即可。具体到 NexT 来说，安装步骤如下。  </p>
<h4 id="1-安装NexT"><a href="#1-安装NexT" class="headerlink" title="1.安装NexT"></a>1.安装NexT</h4><p>当克隆/下载完成后,   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd your-hexo-site</div><div class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
<ul>
<li>设置站点gitBlog/_config.yml的theme字段值为next  </li>
<li>开启服务hexo s –debug  </li>
</ul>
<h4 id="2-主题配置"><a href="#2-主题配置" class="headerlink" title="2.主题配置"></a>2.主题配置</h4><p>通过修改next主题下的_config.yml的scheme字段，配置不同的风格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Schemes</div><div class="line"># scheme: Muse</div><div class="line"># scheme: Mist</div><div class="line">scheme: Pisces</div></pre></td></tr></table></figure>
<h4 id="3-菜单设置"><a href="#3-菜单设置" class="headerlink" title="3.菜单设置"></a>3.菜单设置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">menu:</div><div class="line">  home: /</div><div class="line">  categories: /categories</div><div class="line">  about: /about</div><div class="line">  archives: /archives</div><div class="line">  # tags: /tags</div><div class="line">  #sitemap: /sitemap.xml</div><div class="line">  #commonweal: /404.html</div></pre></td></tr></table></figure>
<p>其中，home代表主页，categories代表分类页，about代表关于页面，archives代表归档页，commonweal代表404页面（page not found时候显示的页面）。本站点显示主页，分类页，关于页面和归档页。  </p>
<h4 id="4-语言设置"><a href="#4-语言设置" class="headerlink" title="4.语言设置"></a>4.语言设置</h4><p>编辑站点配置文件gitBlog/_config.yml将language设置成你所需要的语言。具体值应该在官网指定值中选取。比如   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">language: zh-Hans</div></pre></td></tr></table></figure>
<h4 id="5-头像设置"><a href="#5-头像设置" class="headerlink" title="5.头像设置"></a>5.头像设置</h4><p>头像设置：编辑站点配置文件gitBlog/config.yml，新增字段 avatar， 值设置成头像的链接地址。其中，头像的链接地址可以是：<br><img src="https://wustdong.github.io/images/blog-hexo-imagessetting.png" alt="imagessetiing-display">   </p>
<p>博客站点图标设置:  </p>
<ul>
<li>通过<a href="http://tool.lu/favicon/" target="_blank" rel="external">favicon在线制作</a>制作favicon图片，logo最好设置32*32</li>
<li>图片放在next主题source/images目录下</li>
<li>在next主题配置文件中更改favicon字段。注意此处目录写为绝对路径，个人总结，博客的图标地址都在网站的“/images”文件夹下寻址。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">favicon: https://wustdong.github.io/images/favicon.ico ##此处为网站前面的图标</div></pre></td></tr></table></figure>
<h4 id="6-添加分类页面"><a href="#6-添加分类页面" class="headerlink" title="6.添加分类页面"></a>6.添加分类页面</h4><p>分类页面可方便快速找到某类型的所有文章。以添加categories页面为例，首先在&lt;主题配置文件&gt;取消注释categories。输入命令：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cd gitBlog</div><div class="line">$ hexo new page categories</div></pre></td></tr></table></figure>
<p>将在gitBlog/source下会新生成一个新的文件夹categories，在该文件夹下会有一个index.md文件。 </p>
<ul>
<li>设置页面类型：在上步新生成的gitBlog/source/categories/index.md中添加type: “categories”</li>
<li>设置具体文章的categories：当要为某一篇文章添加分类，只需在myBlog/source/_post目录下的具体文章的categories中添加分类即可，如  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: are you here</div><div class="line">date: 2016-11-28 22:30:31</div><div class="line">categories: [Mac,效率]</div><div class="line">---</div></pre></td></tr></table></figure>
<p>可先在本地开启服务后预览效果，点击首页的分类标签，可跳转到分类页面，hexo会从你发布的文章中查找categories标签对文章进行分类后排列在页面。</p>
<p>其他页面，比如关于我，步骤与添加分类页面类似。不再赘述。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://wustdong.github.io/2017/04/24/diamonds-assign/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://wustdong.github.io/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晶怪的小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/24/diamonds-assign/" itemprop="url">
                  分钻石游戏
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-24T16:56:18+08:00">
                2017-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/逻辑题/" itemprop="url" rel="index">
                    <span itemprop="name">逻辑题</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>在一次笔试中遇到的一个逻辑题：五个同样绝顶聪明的强盗，盗取100颗价值连城的钻石，现在决定瓜分策略。随机抽签决定编号，按编号1，2，3，4，5顺序依次发言。每个发言者如果投票支持人数等于或者超过总在场人数的一半，就通过提案，否则将被杀死。请问最终的分配策略是怎样的？  </p>
</blockquote>
<p>   以下解析中每次都<strong>依次重新排号</strong>，方便推理。例如只剩3个人时，则按照原来的顺序依次编号为1，2，3.</p>
<h2 id="只剩两个人"><a href="#只剩两个人" class="headerlink" title="只剩两个人"></a>只剩两个人</h2><p>分配情况为1号100颗，2号为0颗。因为此时一半即为1，1号同意，提案通过。自己利益最大化。  </p>
<h2 id="只剩三个人"><a href="#只剩三个人" class="headerlink" title="只剩三个人"></a>只剩三个人</h2><p>鉴于只剩2个人的情况，那么最后一个发言者肯定会支持第一个发言的人，否则他将一颗都没有。如此，1号发言者需争取一个（2&gt;=3/2）支持者即可通过方案，1号只需给3号一颗（1&gt;0，好过没有）。所以，1号的方案是:给自己99颗，给3号1颗。  </p>
<h2 id="剩四个人"><a href="#剩四个人" class="headerlink" title="剩四个人"></a>剩四个人</h2><p>鉴于只剩3个人的情况，上述情况的2号会避免出现只剩3个人的局面，也就是说他将支持此局第一个发言者。在此局，3号会支持1号。加之(2&gt;=4/2),因此不难得出，此局分配方式为，1号99颗，3号1颗。  </p>
<h2 id="问题初始：五个人"><a href="#问题初始：五个人" class="headerlink" title="问题初始：五个人"></a>问题初始：五个人</h2><p>鉴于4个人的分配情况，那么此局的1号发言者只需争取3号和5号（也就是只剩4个人时的2号和4号，因为他们在只剩4个人的情况时一颗也没有得到）。同样，为争取到3号和5号，1号需要分一部分给他们，那么分多少呢？1&gt;0，据说这也是经济学里的一个典型盈利模式，即使利益分配极不均衡，但是1&gt;0.那么5个人的分配情况就是1号98颗钻石，3号和5号各一颗。  </p>
<p>最开始分析这个问题的时候，也是从总人数的一半来分析的，但是从5个人开始分析，会发现后面没有支持。然后就得想着倒推。算法中的递归与分治思想。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://wustdong.github.io/2017/04/24/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://wustdong.github.io/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晶怪的小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/24/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-24T11:19:00+08:00">
                2017-04-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://wustdong.github.io/images/avatar.jpeg"
               alt="Jing" />
          <p class="site-author-name" itemprop="name">Jing</p>
           
              <p class="site-description motion-element" itemprop="description">千里之行，始于足下</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jing</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
